<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Internals · JET.jl</title><meta name="title" content="Internals · JET.jl"/><meta property="og:title" content="Internals · JET.jl"/><meta property="twitter:title" content="Internals · JET.jl"/><meta name="description" content="Documentation for JET.jl."/><meta property="og:description" content="Documentation for JET.jl."/><meta property="twitter:description" content="Documentation for JET.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">JET.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">README</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li><span class="tocitem">Analyses</span><ul><li><a class="tocitem" href="../jetanalysis/">Error Analysis</a></li><li><a class="tocitem" href="../optanalysis/">Optimization Analysis</a></li></ul></li><li><a class="tocitem" href="../config/">Configurations</a></li><li class="is-active"><a class="tocitem" href>Internals</a><ul class="internal"><li><a class="tocitem" href="#abstractinterpret"><span>Abstract Interpretation</span></a></li><li><a class="tocitem" href="#toplevel"><span>Top-level Analysis</span></a></li><li><a class="tocitem" href="#analysis-result"><span>Analysis Result</span></a></li><li><a class="tocitem" href="#Error-Report-Interface"><span>Error Report Interface</span></a></li></ul></li><li><span class="tocitem"><code>AbstractAnalyzer</code> Framework</span><ul><li><a class="tocitem" href="../generated-plugin-api/">API</a></li><li><input class="collapse-toggle" id="menuitem-6-2" type="checkbox"/><label class="tocitem" for="menuitem-6-2"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../generated-plugin-examples/dispatch_analysis/">Dispatch Analysis</a></li><li><a class="tocitem" href="../generated-plugin-examples/find_unstable_api/">&quot;Unstable API&quot; Analysis</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Internals</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Internals</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/aviatesk/JET.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/aviatesk/JET.jl/blob/master/docs/src/internals.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Internals-of-JET.jl"><a class="docs-heading-anchor" href="#Internals-of-JET.jl">Internals of JET.jl</a><a id="Internals-of-JET.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Internals-of-JET.jl" title="Permalink"></a></h1><h2 id="abstractinterpret"><a class="docs-heading-anchor" href="#abstractinterpret">Abstract Interpretation</a><a id="abstractinterpret-1"></a><a class="docs-heading-anchor-permalink" href="#abstractinterpret" title="Permalink"></a></h2><p>In order to perform type-level program analysis, JET.jl uses <a href="https://github.com/JuliaLang/julia/blob/master/base/compiler/types.jl"><code>Core.Compiler.AbstractInterpreter</code> interface</a>, and customizes its abstract interpretation by overloading a subset of <code>Core.Compiler</code> functions, that are originally developed for Julia compiler&#39;s type inference and optimizations that aim at generating efficient native code for CPU execution.</p><p><a href="../generated-plugin-api/#JET.AbstractAnalyzer"><code>JET.AbstractAnalyzer</code></a> overloads a set of <code>Core.Compiler</code> functions to implement the &quot;core&quot; functionalities of JET&#39;s analysis, including inter-procedural error report propagation and caching of the analysis result. And each plugin analyzer (e.g. <a href="../jetanalysis/#JET.JETAnalyzer"><code>JET.JETAnalyzer</code></a>) will overload more <code>Core.Compiler</code> functions so that it can perform its own program analysis on top of the core <code>AbstractAnalyzer</code> infrastructure.</p><p>Most overloads use the <a href="https://docs.julialang.org/en/v1/base/base/#Core.invoke"><code>invoke</code></a> reflection, which allows <code>AbstractAnalyzer</code> to dispatch to the original <code>AbstractInterpreter</code>&#39;s abstract interpretation methods while still passing <code>AbstractAnalyzer</code> to the subsequent (maybe overloaded) callees.</p><h3 id="How-AbstractAnalyzer-manages-caches"><a class="docs-heading-anchor" href="#How-AbstractAnalyzer-manages-caches">How <code>AbstractAnalyzer</code> manages caches</a><a id="How-AbstractAnalyzer-manages-caches-1"></a><a class="docs-heading-anchor-permalink" href="#How-AbstractAnalyzer-manages-caches" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JET.AnalysisResult" href="#JET.AnalysisResult"><code>JET.AnalysisResult</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AnalysisResult</code></pre><p><a href="../generated-plugin-api/#JET.AbstractAnalyzer"><code>analyzer::AbstractAnalyzer</code></a> manages <a href="#JET.InferenceErrorReport"><code>InferenceErrorReport</code></a> by associating it with <code>InferenceResult</code>. <code>InferenceErrorReport</code>s found within the currently-analyzed <code>result::InferenceResult</code> can be accessed using <code>get_reports(analyzer, result)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/abstractinterpret/abstractanalyzer.jl#L55-L62">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JET.CachedAnalysisResult" href="#JET.CachedAnalysisResult"><code>JET.CachedAnalysisResult</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">CachedAnalysisResult</code></pre><p><a href="#JET.AnalysisResult"><code>AnalysisResult</code></a> is transformed into <code>CachedAnalysisResult</code> when it is cached into a global cache maintained by <code>AbstractAnalyzer</code>. That means, <code>codeinf::CodeInstance = Core.Compiler.code_cache(analyzer::AbstractAnalyzer)[mi::MethodInstance])</code> is expected to have its field <code>codeinf.inferred::CachedAnalysisResult</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/abstractinterpret/abstractanalyzer.jl#L70-L77">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JET.AnalysisCache" href="#JET.AnalysisCache"><code>JET.AnalysisCache</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AnalysisCache</code></pre><p>JET&#39;s internal representation of a global analysis cache.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/abstractinterpret/abstractanalyzer.jl#L407-L411">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Core.Compiler.inlining_policy" href="#Core.Compiler.inlining_policy"><code>Core.Compiler.inlining_policy</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">inlining_policy(analyzer::AbstractAnalyzer, @nospecialize(src), ...) -&gt; source::Any</code></pre><p>Implements inlining policy for <code>AbstractAnalyzer</code>. Since <code>AbstractAnalyzer</code> works on <code>InferenceResult</code> whose <code>src</code> field keeps <a href="#JET.AnalysisResult"><code>AnalysisResult</code></a> or <a href="#JET.CachedAnalysisResult"><code>CachedAnalysisResult</code></a>, this implementation needs to forward their wrapped source to <code>inlining_policy(::AbstractInterpreter, ::Any, ::UInt8)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/abstractinterpret/abstractanalyzer.jl#L572-L579">source</a></section></article><h2 id="toplevel"><a class="docs-heading-anchor" href="#toplevel">Top-level Analysis</a><a id="toplevel-1"></a><a class="docs-heading-anchor-permalink" href="#toplevel" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JET.virtual_process" href="#JET.virtual_process"><code>JET.virtual_process</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">virtual_process(s::AbstractString,
                filename::AbstractString,
                analyzer::AbstractAnalyzer,
                config::ToplevelConfig) -&gt; res::VirtualProcessResult</code></pre><p>Simulates Julia&#39;s toplevel execution and collects error points, and finally returns Base.Docs.DocStr(svec(&quot;    res::VirtualProcessResult\n\n- <code>res.included_files::Set{String}</code>: files that have been analyzed\n- <code>res.defined_modules::Set{Module}</code>: module contexts created while this top-level analysis\n- <code>res.toplevel_error_reports::Vector{ToplevelErrorReport}</code>: toplevel errors found during the\n    text parsing or partial (actual) interpretation; these reports are \&quot;critical\&quot; and should\n    have precedence over <code>inference_error_reports</code>\n- <code>res.inference_error_reports::Vector{InferenceErrorReport}</code>: possible error reports found\n    by <code>AbstractAnalyzer</code>\n- <code>res.toplevel_signatures</code>: signatures of methods defined within the analyzed files\n- <code>res.actual2virtual::&quot;, Pair{Module, Module}, &quot;</code>: keeps actual and virtual module\n&quot;), nothing, Dict{Symbol, Any}(:typesig =&gt; Union{}, :module =&gt; JET, :linenumber =&gt; 347, :binding =&gt; JET.VirtualProcessResult, :path =&gt; &quot;/home/runner/work/JET.jl/JET.jl/src/toplevel/virtualprocess.jl&quot;, :fields =&gt; Dict{Symbol, Any}()))</p><p>This function first parses <code>s::AbstractString</code> into <code>toplevelex::Expr</code> and then iterate the following steps on each code block (<code>blk</code>) of <code>toplevelex</code>:</p><ol><li>if <code>blk</code> is a <code>:module</code> expression, recursively enters analysis into an newly defined virtual module</li><li><code>lower</code>s <code>blk</code> into <code>:thunk</code> expression <code>lwr</code> (macros are also expanded in this step)</li><li>if the context module is virtualized, replaces self-references of the original context module with virtualized one: see <code>fix_self_references</code></li><li><code>ConcreteInterpreter</code> partially interprets some statements in <code>lwr</code> that should not be abstracted away (e.g. a <code>:method</code> definition); see also <a href="#JET.partially_interpret!"><code>partially_interpret!</code></a></li><li>finally, <code>AbstractAnalyzer</code> analyzes the remaining statements by abstract interpretation</li></ol><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>In order to process the toplevel code sequentially as Julia runtime does, <code>virtual_process</code> splits the entire code, and then iterate a simulation process on each code block. With this approach, we can&#39;t track the inter-code-block level dependencies, and so a partial interpretation of toplevle definitions will fail if it needs an access to global variables defined in other code blocks that are not interpreted but just abstracted. We can circumvent this issue using JET&#39;s <code>concretization_patterns</code> configuration, which allows us to customize JET&#39;s concretization strategy. See <a href="../config/#JET.ToplevelConfig"><code>ToplevelConfig</code></a> for more details.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/toplevel/virtualprocess.jl#L381-L409">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JET.VirtualProcessResult" href="#JET.VirtualProcessResult"><code>JET.VirtualProcessResult</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">res::VirtualProcessResult</code></pre><ul><li><code>res.included_files::Set{String}</code>: files that have been analyzed</li><li><code>res.defined_modules::Set{Module}</code>: module contexts created while this top-level analysis</li><li><code>res.toplevel_error_reports::Vector{ToplevelErrorReport}</code>: toplevel errors found during the   text parsing or partial (actual) interpretation; these reports are &quot;critical&quot; and should   have precedence over <code>inference_error_reports</code></li><li><code>res.inference_error_reports::Vector{InferenceErrorReport}</code>: possible error reports found   by <code>AbstractAnalyzer</code></li><li><code>res.toplevel_signatures</code>: signatures of methods defined within the analyzed files</li><li><code>res.actual2virtual::Pair{Module, Module}</code>: keeps actual and virtual module</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/toplevel/virtualprocess.jl#L347-L359">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JET.virtualize_module_context" href="#JET.virtualize_module_context"><code>JET.virtualize_module_context</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">virtualize_module_context(actual::Module)</code></pre><p>HACK to return a module where the context of <code>actual</code> is virtualized.</p><p>The virtualization will be done by 2 steps below:</p><ol><li>loads the module context of <code>actual</code> into a sandbox module, and export the whole context from there</li><li>then uses names exported from the sandbox</li></ol><p>This way, JET&#39;s runtime simulation in the virtual module context will be able to define a name that is already defined in <code>actual</code> without causing &quot;cannot assign a value to variable ... from module ...&quot; error, etc. It allows JET to virtualize the context of already-existing module other than <code>Main</code>.</p><div class="admonition is-warning"><header class="admonition-header">TODO</header><div class="admonition-body"><p>Currently this function relies on <code>Base.names</code>, and thus it can&#39;t restore the <code>using</code>ed names.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/toplevel/virtualprocess.jl#L468-L485">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JET.ConcreteInterpreter" href="#JET.ConcreteInterpreter"><code>JET.ConcreteInterpreter</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ConcreteInterpreter</code></pre><p>The trait to inject code into JuliaInterpreter&#39;s interpretation process; JET.jl overloads:</p><ul><li><code>JuliaInterpreter.step_expr!</code> to add error report pass for module usage expressions and support package analysis</li><li><code>JuliaInterpreter.evaluate_call_recurse!</code> to special case <code>include</code> calls</li><li><code>JuliaInterpreter.handle_err</code> to wrap an error happened during interpretation into <code>ActualErrorWrapped</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/toplevel/virtualprocess.jl#L1056-L1065">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JET.partially_interpret!" href="#JET.partially_interpret!"><code>JET.partially_interpret!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">partially_interpret!(interp::ConcreteInterpreter, mod::Module, src::CodeInfo)</code></pre><p>Partially interprets statements in <code>src</code> using JuliaInterpreter.jl:</p><ul><li>concretizes &quot;toplevel definitions&quot;, i.e. <code>:method</code>, <code>:struct_type</code>, <code>:abstract_type</code> and <code>:primitive_type</code> expressions and their dependencies</li><li>concretizes user-specified toplevel code (see <a href="../config/#JET.ToplevelConfig"><code>ToplevelConfig</code></a>)</li><li>directly evaluates module usage expressions and report error of invalid module usages (TODO: enter into the loaded module and keep JET analysis)</li><li>special-cases <code>include</code> calls so that top-level analysis recursively enters the included file</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/toplevel/virtualprocess.jl#L1078-L1088">source</a></section></article><h3 id="How-top-level-analysis-is-bridged-to-AbstractAnalyzer"><a class="docs-heading-anchor" href="#How-top-level-analysis-is-bridged-to-AbstractAnalyzer">How top-level analysis is bridged to <code>AbstractAnalyzer</code></a><a id="How-top-level-analysis-is-bridged-to-AbstractAnalyzer-1"></a><a class="docs-heading-anchor-permalink" href="#How-top-level-analysis-is-bridged-to-AbstractAnalyzer" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JET.AbstractGlobal" href="#JET.AbstractGlobal"><code>JET.AbstractGlobal</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">mutable struct AbstractGlobal
    t::Any     # analyzed type
    isconst::Bool # is this abstract global variable declarared as constant or not
end</code></pre><p>Wraps a global variable whose type is analyzed by abstract interpretation. <code>AbstractGlobal</code> object will be actually evaluated into the context module, and a later analysis may refer to or alter its type on future load and store operations.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The type of the wrapped global variable will be propagated only when in a toplevel frame, and thus we don&#39;t care about the analysis cache invalidation on a refinement of the wrapped global variable, since JET doesn&#39;t cache the toplevel frame.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/abstractinterpret/typeinfer.jl#L552-L566">source</a></section></article><h2 id="analysis-result"><a class="docs-heading-anchor" href="#analysis-result">Analysis Result</a><a id="analysis-result-1"></a><a class="docs-heading-anchor-permalink" href="#analysis-result" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JET.JETToplevelResult" href="#JET.JETToplevelResult"><code>JET.JETToplevelResult</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">res::JETToplevelResult</code></pre><p>Represents the result of JET&#39;s analysis on a top-level script.</p><ul><li><code>res.analyzer::AbstractAnalyzer</code>: <a href="../generated-plugin-api/#JET.AbstractAnalyzer"><code>AbstractAnalyzer</code></a> used for this analysis</li><li><code>res.res::VirtualProcessResult</code>: <a href="#JET.VirtualProcessResult"><code>VirtualProcessResult</code></a> collected from this analysis</li><li><code>res.source::AbstractString</code>: the identity key of this analysis</li><li><code>res.jetconfigs</code>: configurations used for this analysis</li></ul><p><code>JETToplevelResult</code> implements <code>show</code> methods for each different frontend. An appropriate <code>show</code> method will be automatically chosen and render the analysis result.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/JETBase.jl#L338-L349">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JET.JETCallResult" href="#JET.JETCallResult"><code>JET.JETCallResult</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">res::JETCallResult</code></pre><p>Represents the result of JET&#39;s analysis on a function call.</p><ul><li><code>res.result::InferenceResult</code>: the result of this analysis</li><li><code>res.analyzer::AbstractAnalyzer</code>: <a href="../generated-plugin-api/#JET.AbstractAnalyzer"><code>AbstractAnalyzer</code></a> used for this analysis</li><li><code>res.source::AbstractString</code>: the identity key of this analysis</li><li><code>res.jetconfigs</code>: configurations used for this analysis</li></ul><p><code>JETCallResult</code> implements <code>show</code> methods for each different frontend. An appropriate <code>show</code> method will be automatically chosen and render the analysis result.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/JETBase.jl#L378-L389">source</a></section></article><h3 id="optanalysis-splitting"><a class="docs-heading-anchor" href="#optanalysis-splitting">Splitting and filtering reports</a><a id="optanalysis-splitting-1"></a><a class="docs-heading-anchor-permalink" href="#optanalysis-splitting" title="Permalink"></a></h3><p>Both <code>JETToplevelResult</code> and <code>JETCallResult</code> can be split into individual failures for integration with tools like Cthulhu:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JET.get_reports" href="#JET.get_reports"><code>JET.get_reports</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rpts = JET.get_reports(result::JETCallResult)</code></pre><p>Split <code>result</code> into a vector of reports, one per issue.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/JETBase.jl#L409-L413">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JET.reportkey" href="#JET.reportkey"><code>JET.reportkey</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">reportkey(report::InferenceErrorReport)</code></pre><p>Returns an identifier for the runtime-dispatched call site of <code>report</code>.</p><p>If you have a long list of reports to analyze, <code>urpts = unique(reportkey, rpts)</code> may remove &quot;duplicates&quot; that arrive at the same runtime dispatch from different entry points.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/abstractinterpret/inferenceerrorreport.jl#L583-L590">source</a></section></article><h2 id="Error-Report-Interface"><a class="docs-heading-anchor" href="#Error-Report-Interface">Error Report Interface</a><a id="Error-Report-Interface-1"></a><a class="docs-heading-anchor-permalink" href="#Error-Report-Interface" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JET.VirtualFrame" href="#JET.VirtualFrame"><code>JET.VirtualFrame</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">VirtualFrame</code></pre><p>Stack information representing virtual execution context:</p><ul><li><code>file::Symbol</code>: the path to the file containing the virtual execution context</li><li><code>line::Int</code>: the line number in the file containing the virtual execution context</li><li><a href="#JET.Signature"><code>sig::Signature</code></a>: a signature of this frame</li><li><code>linfo::MethodInstance</code>: The <code>MethodInstance</code> containing the execution context</li></ul><p>This type is very similar to <code>Base.StackTraces.StackFrame</code>, but its execution context is collected during abstract interpration, not collected from actual execution.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/abstractinterpret/inferenceerrorreport.jl#L39-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JET.VirtualStackTrace" href="#JET.VirtualStackTrace"><code>JET.VirtualStackTrace</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">VirtualStackTrace</code></pre><p>Represents a virtual stack trace in the form of a vector of <code>VirtualFrame</code>. The vector holds <code>VirtualFrame</code>s in order of &quot;from entry call site to error point&quot;, i.e. the first element is the <code>VirtualFrame</code> of the entry call site, and the last element is that contains the error.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/abstractinterpret/inferenceerrorreport.jl#L57-L64">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JET.Signature" href="#JET.Signature"><code>JET.Signature</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Signature</code></pre><p>Represents an expression signature. <code>print_signature</code> implements a frontend functionality to show this type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/abstractinterpret/inferenceerrorreport.jl#L7-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JET.InferenceErrorReport" href="#JET.InferenceErrorReport"><code>JET.InferenceErrorReport</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type InferenceErrorReport end</code></pre><p>An interface type of error reports collected by JET&#39;s abstract interpretation based analysis. All <code>InferenceErrorReport</code>s have the following fields, which explains <em>where</em> and <em>how</em> this error is reported:</p><ul><li><a href="#JET.VirtualStackTrace"><code>vst::VirtualStackTrace</code></a>: a virtual stack trace of the error</li><li><a href="#JET.Signature"><code>sig::Signature</code></a>: a signature of the error point</li></ul><p>Note that some <code>InferenceErrorReport</code> may have additional fields other than <code>vst</code> and <code>sig</code> to explain <em>why</em> they are reported.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/abstractinterpret/inferenceerrorreport.jl#L438-L449">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="JET.ToplevelErrorReport" href="#JET.ToplevelErrorReport"><code>JET.ToplevelErrorReport</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ToplevelErrorReport</code></pre><p>An interface type of error reports that JET collects while top-level concrete interpration. All <code>ToplevelErrorReport</code> should have the following fields:</p><ul><li><code>file::String</code>: the path to the file containing the interpretation context</li><li><code>line::Int</code>: the line number in the file containing the interpretation context</li></ul><p>See also: <a href="#JET.virtual_process"><code>virtual_process</code></a>, <a href="#JET.ConcreteInterpreter"><code>ConcreteInterpreter</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/aviatesk/JET.jl/blob/090ca182f3bc625011c0efa1b5ff7813a09c56bd/src/toplevel/virtualprocess.jl#L1-L10">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../config/">« Configurations</a><a class="docs-footer-nextpage" href="../generated-plugin-api/">API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Tuesday 4 February 2025 05:24">Tuesday 4 February 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
